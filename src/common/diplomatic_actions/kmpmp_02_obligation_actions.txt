redeem_obligation = {
	groups= {
		general
	}

	requires_approval = no

	potential = {
		NOT = { is_country_type = decentralized }
		scope:target_country = {
			NOT = { is_country_type = decentralized }
		}
		scope:target_country = {
			owes_obligation_to = root
		}
	}

	possible = {
		# kmpmp - check target country is not in cooldown list
		custom_tooltip = {
			text = kmpmp_redeem_obligation_possbile_tt
			OR = {
				NOT = {
					has_variable_list = kmpmp_redeem_obligation_cooldown_list
				}
				NOT = {
					is_target_in_variable_list = {
						name = kmpmp_redeem_obligation_cooldown_list
						target = scope:target_country
					}
				}
			}
		}

		is_revolutionary = no
		scope:target_country = {
			is_revolutionary = no
		}
	}

	accept_effect = {
		# kmpmp - add countries in cooldown list on both sides
		# so they can't take over the debts from each other to improve relations quickly
		add_to_variable_list = {
			name = kmpmp_redeem_obligation_cooldown_list
			target = scope:target_country
		}
		scope:target_country = {
			add_to_variable_list = {
				name = kmpmp_redeem_obligation_cooldown_list
				target = ROOT
			}
		}
		# kmpmp - remove from cooldown list after 6 months
		save_scope_as = redeem_obligation_initiator
		scope:target_country = {
			save_scope_as = redeem_obligation_target
		}
		hidden_effect = {
			trigger_event = {
				id = kmpmp_ev_redeem_obligation.1
				days = 7
				#years = 2
			}
			scope:target_country = {
				trigger_event = {
					id = kmpmp_ev_redeem_obligation.1
					days = 7
					#years = 2
				}
			}
		}


		change_relations = { country = scope:target_country value = 30 }
		scope:target_country = { set_owes_obligation_to = { country = root setting = no } }
	}

	ai = {
		evaluation_chance = {
			value = 0.25
		}

		propose_score = {
			value = 10
		}

		will_propose = {
			always = no
		}
	}
}
