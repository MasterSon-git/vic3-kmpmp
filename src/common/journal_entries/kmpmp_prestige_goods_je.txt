je_prestige_good_generic_kmpmp_premium_engines = {
    icon = "gfx/interface/icons/goods_icons/prestige_goods/schichau_engines_prestige.dds"

    group = je_group_technology

    is_shown_when_inactive = {
        has_dlc_feature = mp1_content
        any_company = {
            can_potentially_produce_prestige_goods = prestige_good_generic_kmpmp_premium_engines
            is_producing_prestige_goods = no
            NOT = {
                has_variable = prestige_good_generic_kmpmp_premium_engines_var
            }
        }
    }

    possible = {
        any_company = {
            can_potentially_produce_prestige_goods = prestige_good_generic_kmpmp_premium_engines
            is_producing_prestige_goods = no
            company_is_prosperous = yes
            NOT = {
                custom_tooltip = {
                    text = not_prestige_good_generic_kmpmp_premium_engines_var_tt
                    has_variable = prestige_good_generic_kmpmp_premium_engines_var
                }
            }
        }
    }

    immediate = {
        random_company = {
            limit = {
                can_potentially_produce_prestige_goods = prestige_good_generic_kmpmp_premium_engines
                is_producing_prestige_goods = no
                company_is_prosperous = yes
                NOT = {
                    has_variable = prestige_good_generic_kmpmp_premium_engines_var
                }
            }
            save_scope_as = relevant_company
        }
        set_variable = {
            name = prestige_good_generic_kmpmp_premium_engines_timer_var
            value = 0
        }
        g:engines = {
            save_scope_as = relevant_goods
        }
    }

    complete = {
        trigger_if = {
            limit = {
                has_variable = prestige_good_generic_kmpmp_premium_engines_timer_var
            }
            scope:journal_entry = {
                is_goal_complete = yes
            }
        }
        trigger_if = {
            limit = {
                exists = scope:relevant_company
            }
            scope:relevant_company ?= {
                company_is_prosperous = yes
            }
        }
        trigger_if = {
            limit = {
                exists = scope:relevant_goods
            }
            custom_tooltip = {
                text = relevant_goods_production_rank_tt
                "goods_production_rank(scope:relevant_goods)" <= 3
            }
        }
    }

    on_monthly_pulse = {
        effect = {
            if = {
                limit = {
                    scope:relevant_company ?= {
                        company_is_prosperous = yes
                    }
                    "goods_production_rank(scope:relevant_goods)" <= 3
                }
                change_variable = { name = prestige_good_generic_kmpmp_premium_engines_timer_var add = 1 }
            }
        }
    }

    on_complete = {
        if = {
            limit = {
                exists = scope:relevant_company
            }
            custom_tooltip = {
                text = je_prestige_good_generic_kmpmp_premium_engines_reward_tt
                scope:relevant_company ?= {
                    set_variable = prestige_good_generic_kmpmp_premium_engines_var
                }
            }
        }
        post_notification = prestige_good_generic_kmpmp_premium_engines_unlocked
    }

    invalid = {
        NOT = {
            exists = scope:relevant_company
        }
    }

    current_value = {
        value = root.var:prestige_good_generic_kmpmp_premium_engines_timer_var
    }

    goal_add_value = {
        add = prestige_good_journal_entry_months
    }

    progressbar = yes

    weight = 1000

    should_be_pinned_by_default = yes
}

je_prestige_good_generic_kmpmp_premium_silk = {
    icon = "gfx/interface/icons/goods_icons/prestige_goods/schichau_engines_prestige.dds"

    group = je_group_technology

    is_shown_when_inactive = {
        has_dlc_feature = mp1_content
        any_company = {
            can_potentially_produce_prestige_goods = prestige_good_generic_kmpmp_premium_silk
            is_producing_prestige_goods = no
            NOT = {
                has_variable = prestige_good_generic_kmpmp_premium_silk_var
            }
        }
    }

    possible = {
        any_company = {
            can_potentially_produce_prestige_goods = prestige_good_generic_kmpmp_premium_silk
            is_producing_prestige_goods = no
            company_is_prosperous = yes
            NOT = {
                custom_tooltip = {
                    text = not_prestige_good_generic_kmpmp_premium_silk_var_tt
                    has_variable = prestige_good_generic_kmpmp_premium_silk_var
                }
            }
        }
    }

    immediate = {
        random_company = {
            limit = {
                can_potentially_produce_prestige_goods = prestige_good_generic_kmpmp_premium_silk
                is_producing_prestige_goods = no
                company_is_prosperous = yes
                NOT = {
                    has_variable = prestige_good_generic_kmpmp_premium_silk_var
                }
            }
            save_scope_as = relevant_company
        }
        set_variable = {
            name = prestige_good_generic_kmpmp_premium_silk_timer_var
            value = 0
        }
        g:silk = {
            save_scope_as = relevant_goods
        }
    }

    complete = {
        trigger_if = {
            limit = {
                has_variable = prestige_good_generic_kmpmp_premium_silk_timer_var
            }
            scope:journal_entry = {
                is_goal_complete = yes
            }
        }
        trigger_if = {
            limit = {
                exists = scope:relevant_company
            }
            scope:relevant_company ?= {
                company_is_prosperous = yes
            }
        }
        trigger_if = {
            limit = {
                exists = scope:relevant_goods
            }
            custom_tooltip = {
                text = relevant_goods_production_rank_tt
                "goods_production_rank(scope:relevant_goods)" <= 3
            }
        }
    }

    on_monthly_pulse = {
        effect = {
            if = {
                limit = {
                    scope:relevant_company ?= {
                        company_is_prosperous = yes
                    }
                    "goods_production_rank(scope:relevant_goods)" <= 3
                }
                change_variable = { name = prestige_good_generic_kmpmp_premium_silk_timer_var add = 1 }
            }
        }
    }

    on_complete = {
        if = {
            limit = {
                exists = scope:relevant_company
            }
            custom_tooltip = {
                text = je_prestige_good_generic_kmpmp_premium_silk_reward_tt
                scope:relevant_company ?= {
                    set_variable = prestige_good_generic_kmpmp_premium_silk_var
                }
            }
        }
        post_notification = prestige_good_generic_kmpmp_premium_silk_unlocked
    }

    invalid = {
        NOT = {
            exists = scope:relevant_company
        }
    }

    current_value = {
        value = root.var:prestige_good_generic_kmpmp_premium_silk_timer_var
    }

    goal_add_value = {
        add = prestige_good_journal_entry_months
    }

    progressbar = yes

    weight = 1000

    should_be_pinned_by_default = yes
}

je_prestige_good_generic_kmpmp_premium_oil = {
    icon = "gfx/interface/icons/goods_icons/prestige_goods/schichau_engines_prestige.dds"

    group = je_group_technology

    is_shown_when_inactive = {
        has_dlc_feature = mp1_content
        any_company = {
            can_potentially_produce_prestige_goods = prestige_good_generic_kmpmp_premium_oil
            is_producing_prestige_goods = no
            NOT = {
                has_variable = prestige_good_generic_kmpmp_premium_oil_var
            }
        }
    }

    possible = {
        any_company = {
            can_potentially_produce_prestige_goods = prestige_good_generic_kmpmp_premium_oil
            is_producing_prestige_goods = no
            company_is_prosperous = yes
            NOT = {
                custom_tooltip = {
                    text = not_prestige_good_generic_kmpmp_premium_oil_var_tt
                    has_variable = prestige_good_generic_kmpmp_premium_oil_var
                }
            }
        }
    }

    immediate = {
        random_company = {
            limit = {
                can_potentially_produce_prestige_goods = prestige_good_generic_kmpmp_premium_oil
                is_producing_prestige_goods = no
                company_is_prosperous = yes
                NOT = {
                    has_variable = prestige_good_generic_kmpmp_premium_oil_var
                }
            }
            save_scope_as = relevant_company
        }
        set_variable = {
            name = prestige_good_generic_kmpmp_premium_oil_timer_var
            value = 0
        }
        g:oil = {
            save_scope_as = relevant_goods
        }
    }

    complete = {
        trigger_if = {
            limit = {
                has_variable = prestige_good_generic_kmpmp_premium_oil_timer_var
            }
            scope:journal_entry = {
                is_goal_complete = yes
            }
        }
        trigger_if = {
            limit = {
                exists = scope:relevant_company
            }
            scope:relevant_company ?= {
                company_is_prosperous = yes
            }
        }
        trigger_if = {
            limit = {
                exists = scope:relevant_goods
            }
            custom_tooltip = {
                text = relevant_goods_production_rank_tt
                "goods_production_rank(scope:relevant_goods)" <= 3
            }
        }
    }

    on_monthly_pulse = {
        effect = {
            if = {
                limit = {
                    scope:relevant_company ?= {
                        company_is_prosperous = yes
                    }
                    "goods_production_rank(scope:relevant_goods)" <= 3
                }
                change_variable = { name = prestige_good_generic_kmpmp_premium_oil_timer_var add = 1 }
            }
        }
    }

    on_complete = {
        if = {
            limit = {
                exists = scope:relevant_company
            }
            custom_tooltip = {
                text = je_prestige_good_generic_kmpmp_premium_oil_reward_tt
                scope:relevant_company ?= {
                    set_variable = prestige_good_generic_kmpmp_premium_oil_var
                }
            }
        }
        post_notification = prestige_good_generic_kmpmp_premium_oil_unlocked
    }

    invalid = {
        NOT = {
            exists = scope:relevant_company
        }
    }

    current_value = {
        value = root.var:prestige_good_generic_kmpmp_premium_oil_timer_var
    }

    goal_add_value = {
        add = prestige_good_journal_entry_months
    }

    progressbar = yes

    weight = 1000

    should_be_pinned_by_default = yes
}

je_prestige_good_generic_kmpmp_premium_wine = {
    icon = "gfx/interface/icons/goods_icons/prestige_goods/schichau_engines_prestige.dds"

    group = je_group_technology

    is_shown_when_inactive = {
        has_dlc_feature = mp1_content
        any_company = {
            can_potentially_produce_prestige_goods = prestige_good_generic_kmpmp_premium_wine
            is_producing_prestige_goods = no
            NOT = {
                has_variable = prestige_good_generic_kmpmp_premium_wine_var
            }
        }
    }

    possible = {
        any_company = {
            can_potentially_produce_prestige_goods = prestige_good_generic_kmpmp_premium_wine
            is_producing_prestige_goods = no
            company_is_prosperous = yes
            NOT = {
                custom_tooltip = {
                    text = not_prestige_good_generic_kmpmp_premium_wine_var_tt
                    has_variable = prestige_good_generic_kmpmp_premium_wine_var
                }
            }
        }
    }

    immediate = {
        random_company = {
            limit = {
                can_potentially_produce_prestige_goods = prestige_good_generic_kmpmp_premium_wine
                is_producing_prestige_goods = no
                company_is_prosperous = yes
                NOT = {
                    has_variable = prestige_good_generic_kmpmp_premium_wine_var
                }
            }
            save_scope_as = relevant_company
        }
        set_variable = {
            name = prestige_good_generic_kmpmp_premium_wine_timer_var
            value = 0
        }
        g:wine = {
            save_scope_as = relevant_goods
        }
    }

    complete = {
        trigger_if = {
            limit = {
                has_variable = prestige_good_generic_kmpmp_premium_wine_timer_var
            }
            scope:journal_entry = {
                is_goal_complete = yes
            }
        }
        trigger_if = {
            limit = {
                exists = scope:relevant_company
            }
            scope:relevant_company ?= {
                company_is_prosperous = yes
            }
        }
        trigger_if = {
            limit = {
                exists = scope:relevant_goods
            }
            custom_tooltip = {
                text = relevant_goods_production_rank_tt
                "goods_production_rank(scope:relevant_goods)" <= 3
            }
        }
    }

    on_monthly_pulse = {
        effect = {
            if = {
                limit = {
                    scope:relevant_company ?= {
                        company_is_prosperous = yes
                    }
                    "goods_production_rank(scope:relevant_goods)" <= 3
                }
                change_variable = { name = prestige_good_generic_kmpmp_premium_wine_timer_var add = 1 }
            }
        }
    }

    on_complete = {
        if = {
            limit = {
                exists = scope:relevant_company
            }
            custom_tooltip = {
                text = je_prestige_good_generic_kmpmp_premium_wine_reward_tt
                scope:relevant_company ?= {
                    set_variable = prestige_good_generic_kmpmp_premium_wine_var
                }
            }
        }
        post_notification = prestige_good_generic_kmpmp_premium_wine_unlocked
    }

    invalid = {
        NOT = {
            exists = scope:relevant_company
        }
    }

    current_value = {
        value = root.var:prestige_good_generic_kmpmp_premium_wine_timer_var
    }

    goal_add_value = {
        add = prestige_good_journal_entry_months
    }

    progressbar = yes

    weight = 1000

    should_be_pinned_by_default = yes
}
