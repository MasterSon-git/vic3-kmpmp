kmpmp_apply_goods_shortage_modifier_low_medium_high = {
	if = {
		limit = {
			market ?= {
				mg:$MARKET_GOOD$ ?= {
					market_goods_pricier < 0.5
				}
			}
			$TARGET$ = {
				OR = {
					has_modifier = $MODIFIER$_low
					has_modifier = $MODIFIER$_medium
					has_modifier = $MODIFIER$_high
				}
			}
		}
		$TARGET$ = {
			kmpmp_remove_goods_shortage_modifier_low = {
				MODIFIER = $MODIFIER$
			}
			kmpmp_remove_goods_shortage_modifier_medium = {
				MODIFIER = $MODIFIER$
			}
			kmpmp_remove_goods_shortage_modifier_high = {
				MODIFIER = $MODIFIER$
			}
		}
	}
	else_if = {
		limit = {
			market ?= {
				mg:$MARKET_GOOD$ ?= {
					market_goods_pricier >= 0.5
					market_goods_pricier < 0.6
				}
			}
			$TARGET$ = {
				NOT = {
					has_modifier = $MODIFIER$_low
				}
			}
		}
		$TARGET$ = {
			kmpmp_add_goods_shortage_modifier_low = {
				MODIFIER = $MODIFIER$
			}
			kmpmp_remove_goods_shortage_modifier_medium = {
				MODIFIER = $MODIFIER$
			}
			kmpmp_remove_goods_shortage_modifier_high = {
				MODIFIER = $MODIFIER$
			}
		}
	}
	else_if = {
		limit = {
			market ?= {
				mg:$MARKET_GOOD$ ?= {
					market_goods_pricier >= 0.6
					market_goods_pricier < 0.75
				}
			}
			$TARGET$ = {
				NOT = {
					has_modifier = $MODIFIER$_medium
				}
			}
		}
		$TARGET$ = {
			kmpmp_add_goods_shortage_modifier_medium = {
				MODIFIER = $MODIFIER$
			}
			kmpmp_remove_goods_shortage_modifier_low = {
				MODIFIER = $MODIFIER$
			}
			kmpmp_remove_goods_shortage_modifier_high = {
				MODIFIER = $MODIFIER$
			}
		}
	}
	else_if = {
		limit = {
			market ?= {
				mg:$MARKET_GOOD$ ?= {
					market_goods_pricier >= 0.75
				}
			}
			$TARGET$ = {
				NOT = {
					has_modifier = $MODIFIER$_high
				}
			}
		}
		$TARGET$ = {
			kmpmp_add_goods_shortage_modifier_high = {
				MODIFIER = $MODIFIER$
			}
			kmpmp_remove_goods_shortage_modifier_low = {
				MODIFIER = $MODIFIER$
			}
			kmpmp_remove_goods_shortage_modifier_medium = {
				MODIFIER = $MODIFIER$
			}
		}
	}
}

kmpmp_apply_goods_shortage_modifier_medium_high = {
	if = {
		limit = {
			market ?= {
				mg:$MARKET_GOOD$ ?= {
					market_goods_pricier < 0.6
				}
			}
			$TARGET$ = {
				OR = {
					has_modifier = $MODIFIER$_medium
					has_modifier = $MODIFIER$_high
				}
			}
		}
		$TARGET$ = {
			kmpmp_remove_goods_shortage_modifier_medium = {
				MODIFIER = $MODIFIER$
			}
			kmpmp_remove_goods_shortage_modifier_high = {
				MODIFIER = $MODIFIER$
			}
		}
	}
	else_if = {
		limit = {
			market ?= {
				mg:$MARKET_GOOD$ ?= {
					market_goods_pricier >= 0.6
					market_goods_pricier < 0.75
				}
			}
			$TARGET$ = {
				NOT = {
					has_modifier = $MODIFIER$_medium
				}
			}
		}
		$TARGET$ = {
			kmpmp_add_goods_shortage_modifier_medium = {
				MODIFIER = $MODIFIER$
			}
			kmpmp_remove_goods_shortage_modifier_high = {
				MODIFIER = $MODIFIER$
			}
		}
	}
	else_if = {
		limit = {
			market ?= {
				mg:$MARKET_GOOD$ ?= {
					market_goods_pricier >= 0.75
				}
			}
			$TARGET$ = {
				NOT = {
					has_modifier = $MODIFIER$_high
				}
			}
		}
		$TARGET$ = {
			kmpmp_add_goods_shortage_modifier_high = {
				MODIFIER = $MODIFIER$
			}
			kmpmp_remove_goods_shortage_modifier_medium = {
				MODIFIER = $MODIFIER$
			}
		}
	}
}

# ROOT - target
# MODIFIER - modifier name without suffix
kmpmp_add_goods_shortage_modifier_low = {
	if = {
		limit = {
			NOT = {
				has_modifier = $MODIFIER$_low
			}
		}
		add_modifier = {
			name = $MODIFIER$_low
		}
	}
}

# ROOT - target
# MODIFIER - modifier name without suffix
kmpmp_remove_goods_shortage_modifier_low = {
	if = {
		limit = {
			has_modifier = $MODIFIER$_low
		}
		remove_modifier = $MODIFIER$_low
	}
}

# ROOT - target
# MODIFIER - modifier name without suffix
kmpmp_add_goods_shortage_modifier_medium = {
	if = {
		limit = {
			NOT = {
				has_modifier = $MODIFIER$_medium
			}
		}
		add_modifier = {
			name = $MODIFIER$_medium
		}
	}
}

# ROOT - target
# MODIFIER - modifier name without suffix
kmpmp_remove_goods_shortage_modifier_medium = {
	if = {
		limit = {
			has_modifier = $MODIFIER$_medium
		}
		remove_modifier = $MODIFIER$_medium
	}
}

# ROOT - target
# MODIFIER - modifier name without suffix
kmpmp_add_goods_shortage_modifier_high = {
	if = {
		limit = {
			NOT = {
				has_modifier = $MODIFIER$_high
			}
		}
		add_modifier = {
			name = $MODIFIER$_high
		}
	}
}

# ROOT - target
# MODIFIER - modifier name without suffix
kmpmp_remove_goods_shortage_modifier_high = {
	if = {
		limit = {
			has_modifier = $MODIFIER$_high
		}
		remove_modifier = $MODIFIER$_high
	}
}
